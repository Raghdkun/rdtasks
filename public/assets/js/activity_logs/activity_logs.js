(()=>{"use strict";$(document).ready((function(){var e="";$("#user_id").select2({width:"100%"}),window.onbeforeunload=function(){window.scrollTo(0,0)};var t=2;$(window).scroll((function(){$(window).scrollTop()==$(document).height()-$(window).height()&&(!function(t){a||($(".load-more-logs").show(),$.ajax({url:route("activity-logs")+"?page="+t,type:"get",data:{user_id:e},success:function(e){if(e.success){var t,n=e.data.activityLogs.data,r="";if(n.length>0)for(a=!1,t=0;t<n.length;++t){var s=[{created_at:i(n[t].created_at),subject_type:isEmpty(e.data.resultData[t].modal)?o("n/a"):o(e.data.resultData[t].modal),created_by:n[t].created_by.name,description:n[t].description+(null!=e.data.resultData[t].data?e.data.resultData[t].data:""),id:n[t].id}];r+=prepareTemplateRender("#activityLogsTemplate",s)}else a=!0,$(".load-more-logs").hide(),$(".no-found-more-logs").html(noMoreRecords);$(".activities").append(r)}},error:function(e){manageAjaxErrors(e)}}))}(t),t++)}));var a=!1;function i(e){return moment(e).fromNow()}function o(e){var t=e.substring(11);return"Department"==t?"fas fa-building":"Client"==t?"fas fa-user-tie":"Role"==t?"fas fa-user":"Project"==t?"fas fa-folder-open":"Task"==t?"fas fa-tasks":"Report"==t?"fas fa-file":"Invoice"==t?"fas fa-file-invoice":"User"==t?"fas fa-users":"Event"==t?"fas fa-calendar-day":"fas fa-history"}$(document).on("click",".activityData",(function(){var e=$(this).attr("data-id");deleteActivity(route("activity-delete",e),"Activity Type","Activity Log")})),window.deleteActivity=function(e){swal({title:deleteHeading+" !",text:deleteMessage+' "Activity Log" ?',type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,confirmButtonColor:"#6777ef",cancelButtonColor:"#d33",cancelButtonText:noMessages,confirmButtonText:yesMessages},(function(){$.ajax({url:e,type:"DELETE",dataType:"json",success:function(e){e.success&&window.livewire.emit("refresh"),swal({title:"Deleted!",text:"Activity Log has been deleted.",type:"success",confirmButtonColor:"#6777EF",timer:2e3})},error:function(e){swal({title:"",text:e.responseJSON.message,type:"error",confirmButtonColor:"#6777EF",timer:5e3})}})}))},$(document).on("change","#user_id",(function(){e=$(this).val(),userFilterLivewire(e),t=2,a=!1})),window.userFilterLivewire=function(e){window.livewire.emit("userFilter",e)}})),document.addEventListener("livewire:load",(function(e){window.livewire.hook("message.processed",(function(){$("#user_id").select2({width:"100%"})}))}))})();