$(document).ready((function(){"use strict";$("#language").select2({width:"100%"}),$(document).on("click",".edit-profile",(function(e){var o=$(e.currentTarget).attr("data-id");renderProfileData(o)})),$(document).on("submit","#editProfileForm",(function(e){e.preventDefault();var o=jQuery(this).find("#btnPrEditSave");o.button("loading"),$.ajax({url:route("update-profile"),type:"post",data:new FormData($(this)[0]),processData:!1,contentType:!1,success:function(e){e.success&&($("#EditProfileModal").modal("hide"),displaySuccessMessage(e.message),setTimeout((function(){location.reload()}),1500))},error:function(e){UnprocessableInputError(e)},complete:function(){o.button("reset")}})})),$(document).on("click",".changePasswordModal",(function(){$("#changePasswordModal").appendTo("body").modal("show")})),$(document).on("submit","#changePasswordForm",(function(e){if(e.preventDefault(),o=$("#pfCurrentPassword").val().trim(),a=$("#pfNewPassword").val().trim(),r=$("#pfNewConfirmPassword").val().trim(),!(""!=o&&""!=a&&""!=r||($("#editPasswordValidationErrorsBox").show().html("Please fill all the required fields."),0)))return!1;var o,a,r,t=jQuery(this).find("#btnPrPasswordEditSave");t.button("loading"),$.ajax({url:route("change-password"),type:"post",data:new FormData($(this)[0]),processData:!1,contentType:!1,success:function(e){e.success&&($("#ChangePasswordModal").modal("hide"),displaySuccessMessage(e.message),setTimeout((function(){location.reload()}),1e3))},error:function(e){manageAjaxErrors(e,"editPasswordValidationErrorsBox")},complete:function(){t.button("reset")}})})),$("#EditProfileModal").on("hidden.bs.modal",(function(){resetModalForm("#editProfileForm","#editProfileValidationErrorsBox")})),$("#changePasswordModal").on("hidden.bs.modal",(function(){resetModalForm("#changePasswordForm","#editPasswordValidationErrorsBox")})),$(document).on("change","#pfImage",(function(){var e=$(this).val().split(".").pop().toLowerCase();-1==$.inArray(e,["gif","png","jpg","jpeg"])?($(this).val(""),$("#editProfileValidationErrorsBox").html("The profile image must be a file of type: jpeg, jpg, png.").show()):displayPhoto(this,"#edit_preview_photo")})),window.renderProfileData=function(e){$.ajax({url:route("client-edit-profile",e),type:"GET",success:function(e){if(e.success){var o=e.data,a=document.createElement("textarea");a.innerHTML=o.name,$("#pfClientId").val(o.id),$("#pfUserId").val(o.user_id),$("#pfName").val(a.value),$("#pfEmail").val(o.email),$("#edit_preview_photo").attr("src",o.avatar),$("#EditProfileModal").appendTo("body").modal("show")}}})},window.displayPhoto=function(e,o){var a=!0;if(e.files&&e.files[0]){var r=new FileReader;r.onload=function(e){var r=new Image;r.src=e.target.result,r.onload=function(){$(o).attr("src",e.target.result),a=!0}},a&&(r.readAsDataURL(e.files[0]),$(o).show())}},$(document).on("keyup","#name",(function(e){var o=$(this).val().trim();o=o.replace(/[^a-z0-9]+|\s+/gim,""),(8===e.charCode||e.charCode>=65&&e.charCode<=90||e.charCode>=95&&e.charCode<=122||0===e.charCode||e.charCode>=48&&e.charCode<=57)&&o.length<=8&&$("#prefix").val(o.toLocaleUpperCase())})),$(document).on("keyup","#edit_name",(function(e){var o=$(this).val().trim();o=o.replace(/[^a-z0-9]+|\s+/gim,""),(8===e.charCode||e.charCode>=65&&e.charCode<=90||e.charCode>=95&&e.charCode<=122||0===e.charCode||e.charCode>=48&&e.charCode<=57)&&o.length<=8&&$("#edit_prefix").val(o.toLocaleUpperCase())})),$(".confirm-pwd").hide(),$(document).on("blur","#pfCurrentPassword",(function(){var e=$("#pfCurrentPassword").val();if(""==e||""==e.trim())return $(".confirm-pwd").hide(),!1;$(".confirm-pwd").show()})),$(".confirm-pwd").hide(),$(document).on("blur","#pfNewPassword",(function(){var e=$("#pfNewPassword").val();if(""==e||""==e.trim())return $(".confirm-pwd").hide(),!1;$(".confirm-pwd").show()})),$(document).on("blur","#pfNewConfirmPassword",(function(){var e=$("#pfNewConfirmPassword").val();if(""==e||""==e.trim())return $(".confirm-pwd").hide(),!1;$(".confirm-pwd").show()})),$(document).on("click",".changeType",(function(){var e=$(this).parent().siblings();"password"==e.attr("type")?($(this).children().addClass("icon-eye"),$(this).children().removeClass("icon-ban"),e.attr("type","text")):($(this).children().removeClass("icon-eye"),$(this).children().addClass("icon-ban"),e.attr("type","password"))}))})),$(document).on("click",".changeLanguage",(function(){var e=$(this).data("prefix-value");$.ajax({type:"POST",url:route("update-language"),data:{languageName:e},success:function(){Lang.setLocale(e),location.reload()}})}));