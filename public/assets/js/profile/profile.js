$(document).ready((function(){"use strict";$("#language").select2({width:"100%"});var o="0",t="0",i="0",e="0",a="0",n="0";$(".notificationPicker1, .notificationPicker2 , .notificationPicker3").timeDropper({format:"HH:mm",mousewheel:!0}),$(document).on("submit","#notificationForm",(function(o){o.preventDefault();var t=jQuery(this).find("#notificationBtn");t.button("loading"),$.ajax({url:route("notifications.store"),type:"POST",data:$(this).serialize(),success:function(o){displaySuccessMessage(o.message),setTimeout((function(){location.reload()}),1e3),$("#notificationModal").modal("hide")},error:function(o){UnprocessableInputError(o)},complete:function(){t.button("reset")}})})),$(document).on("submit","#editProfileForm",(function(o){o.preventDefault();var t=jQuery(this).find("#btnPrEditSave");t.button("loading"),$.ajax({url:route("user-update-profile"),type:"post",data:new FormData($(this)[0]),processData:!1,contentType:!1,success:function(o){o.success&&($("#EditProfileModal").modal("hide"),displaySuccessMessage(o.message),setTimeout((function(){location.reload()}),1500))},error:function(o){UnprocessableInputError(o)},complete:function(){t.button("reset")}})})),$(document).on("click",".changePasswordModal",(function(){$("#changePasswordModal").appendTo("body").modal("show")})),$("#pfCurrentPassword, #pfNewPassword, #pfNewConfirmPassword").on("keypress",(function(o){if(32==o.which)return!1})),$(document).on("submit","#changePasswordForm",(function(o){if(o.preventDefault(),t=$("#pfCurrentPassword").val().trim(),i=$("#pfNewPassword").val().trim(),e=$("#pfNewConfirmPassword").val().trim(),!(""!=t&&""!=i&&""!=e||($("#editPasswordValidationErrorsBox").show().html("Please fill all the required fields."),0)))return!1;var t,i,e,a=jQuery(this).find("#btnPrPasswordEditSave");a.button("loading"),$.ajax({url:route("user-change-password"),type:"post",data:new FormData($(this)[0]),processData:!1,contentType:!1,success:function(o){o.success&&($("#ChangePasswordModal").modal("hide"),displaySuccessMessage(o.message),setTimeout((function(){location.reload()}),1500))},error:function(o){manageAjaxErrors(o,"editPasswordValidationErrorsBox")},complete:function(){a.button("reset")}})})),$("#EditProfileModal").on("hidden.bs.modal",(function(){resetModalForm("#editProfileForm","#editProfileValidationErrorsBox")})),$("#notificationModal").on("hidden.bs.modal",(function(){})),$("#changePasswordModal").on("hidden.bs.modal",(function(){resetModalForm("#changePasswordForm","#editPasswordValidationErrorsBox")})),$(document).on("click",".edit-profile",(function(o){var t=$(o.currentTarget).attr("data-id");renderProfileData(t)})),$(document).on("click",".notificationModal",(function(r){$(r.currentTarget).attr("data-id"),$.ajax({url:route("notifications.index"),type:"GET",success:function(r){if($(".firstHour").val("00:00"),$(".secondHour").val("00:00"),$(".thirdHour").val("00:00"),!isEmpty(r.data)&&r.success){var d=r.data.first_notification_hour.split(":");o=d[0],t=d[1];var s=r.data.second_notification_hour.split(":");i=s[0],e=s[1];var c=r.data.third_notification_hour.split(":");a=c[0],n=c[1],$(".firstHour").val(r.data.first_notification_hour),$(".secondHour").val(r.data.second_notification_hour),$(".thirdHour").val(r.data.third_notification_hour)}setTimeout((function(){$(document).find("div#td-clock-0").find("div.td-clock").find("div.td-time span:first-child").prop("class","on firstNotificationHour"),$(document).find("div#td-clock-0").find("div.td-clock").find("div.td-time span:last-child").prop("class","firstNotificationMinute"),$(document).find("div#td-clock-1").find("div.td-clock").find("div.td-time span:first-child").prop("class","on secondNotificationHour"),$(document).find("div#td-clock-1").find("div.td-clock").find("div.td-time span:last-child").prop("class","secondNotificationMinute"),$(document).find("div#td-clock-2").find("div.td-clock").find("div.td-time span:first-child").prop("class","on thirdNotificationHour"),$(document).find("div#td-clock-2").find("div.td-clock").find("div.td-time span:last-child").prop("class","thirdNotificationMinute")}),500),setTimeout((function(){$(".firstNotificationHour").text(o),$(".firstNotificationMinute").text(t),$(".secondNotificationHour").text(i),$(".secondNotificationMinute").text(e),$(".thirdNotificationHour").text(a),$(".thirdNotificationMinute").text(n)}),500),$("#notificationModal").appendTo("body").modal("show")},error:function(o){UnprocessableInputError(o)}})})),$(document).on("change","#pfImage",(function(){var o=$(this).val().split(".").pop().toLowerCase();-1==$.inArray(o,["gif","png","jpg","jpeg"])?($(this).val(""),displayErrorMessage("The profile image must be a file of type: jpeg, jpg, png.")):displayPhoto(this,"#edit_preview_photo")})),window.renderProfileData=function(o){$.ajax({url:route("users.edit",o),type:"GET",success:function(o){if(o.success){var t=o.data,i=document.createElement("textarea");i.innerHTML=t.name,$("#pfUserId").val(t.id),$("#pfName").val(i.value),$("#pfEmail").val(t.email),$("#pfPhone").val(t.phone),$("#edit_preview_photo").attr("src",t.img_avatar),$("#EditProfileModal").appendTo("body").modal("show")}}})},window.displayPhoto=function(o,t){var i=!0;if(o.files&&o.files[0]){var e=new FileReader;e.onload=function(o){var e=new Image;e.src=o.target.result,e.onload=function(){$(t).attr("src",o.target.result),i=!0}},i&&(e.readAsDataURL(o.files[0]),$(t).show())}},$(document).on("keyup","#name",(function(o){var t=$(this).val().trim();t=t.replace(/[^a-z0-9]+|\s+/gim,""),(8===o.charCode||o.charCode>=65&&o.charCode<=90||o.charCode>=95&&o.charCode<=122||0===o.charCode||o.charCode>=48&&o.charCode<=57)&&t.length<=8&&$("#prefix").val(t.toLocaleUpperCase())})),$(document).on("keyup","#edit_name",(function(o){var t=$(this).val().trim();t=t.replace(/[^a-z0-9]+|\s+/gim,""),(8===o.charCode||o.charCode>=65&&o.charCode<=90||o.charCode>=95&&o.charCode<=122||0===o.charCode||o.charCode>=48&&o.charCode<=57)&&t.length<=8&&$("#edit_prefix").val(t.toLocaleUpperCase())})),$(".confirm-pwd").hide(),$(document).on("blur","#pfCurrentPassword",(function(){var o=$("#pfCurrentPassword").val();if(""==o||""==o.trim())return $(".confirm-pwd").hide(),!1;$(".confirm-pwd").show()})),$(".confirm-pwd").hide(),$(document).on("blur","#pfNewPassword",(function(){var o=$("#pfNewPassword").val();if(""==o||""==o.trim())return $(".confirm-pwd").hide(),!1;$(".confirm-pwd").show()})),$(document).on("blur","#pfNewConfirmPassword",(function(){var o=$("#pfNewConfirmPassword").val();if(""==o||""==o.trim())return $(".confirm-pwd").hide(),!1;$(".confirm-pwd").show()})),$(document).on("click",".changeType",(function(){var o=$(this).parent().siblings();"password"==o.attr("type")?($(this).children().addClass("icon-eye"),$(this).children().removeClass("icon-ban"),o.attr("type","text")):($(this).children().removeClass("icon-eye"),$(this).children().addClass("icon-ban"),o.attr("type","password"))}))})),$(document).on("click",".changeLanguage",(function(){var o=$(this).data("prefix-value");$.ajax({type:"POST",url:route("update-language"),data:{languageName:o},success:function(){location.reload()}})}));