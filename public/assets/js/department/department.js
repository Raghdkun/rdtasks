(()=>{"use strict";var e=Pickr.create({el:".color-wrapper",theme:"nano",closeWithKey:"Enter",autoReposition:!0,defaultRepresentation:"HEX",position:"bottom-end",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 1)","rgba(156, 39, 176, 1)","rgba(103, 58, 183, 1)","rgba(63, 81, 181, 1)","rgba(33, 150, 243, 1)","rgba(3, 169, 244, 1)","rgba(0, 188, 212, 1)","rgba(0, 150, 136, 1)","rgba(76, 175, 80, 1)","rgba(139, 195, 74, 1)","rgba(205, 220, 57, 1)","rgba(255, 235, 59, 1)","rgba(255, 193, 7, 1)"],components:{preview:!0,hue:!0,interaction:{input:!0,clear:!1,save:!1}}}),t=Pickr.create({el:".color-wrapper",theme:"nano",closeWithKey:"Enter",autoReposition:!0,defaultRepresentation:"HEX",position:"bottom-end",swatches:["rgba(244, 67, 54, 1)","rgba(233, 30, 99, 1)","rgba(156, 39, 176, 1)","rgba(103, 58, 183, 1)","rgba(63, 81, 181, 1)","rgba(33, 150, 243, 1)","rgba(3, 169, 244, 1)","rgba(0, 188, 212, 1)","rgba(0, 150, 136, 1)","rgba(76, 175, 80, 1)","rgba(139, 195, 74, 1)","rgba(205, 220, 57, 1)","rgba(255, 235, 59, 1)","rgba(255, 193, 7, 1)"],components:{preview:!0,hue:!0,interaction:{input:!0,clear:!1,save:!1}}});e.on("change",(function(){var t=e.getColor().toHEXA().toString();if(wc_hex_is_light(t))return $("#validationErrorsBox").text(""),$("#validationErrorsBox").show().html(""),$("#validationErrorsBox").text("Pick a different color"),setTimeout((function(){$("#validationErrorsBox").slideUp()}),5e3),void $(':input[id="btnSave"]').prop("disabled",!0);$(':input[id="btnSave"]').prop("disabled",!1),e.setColor(t),$("#color").val(t)})),t.on("change",(function(){var e=t.getColor().toHEXA().toString();if(wc_hex_is_light(e))return $("#editValidationErrorsBox").text(""),$("#editValidationErrorsBox").show().html(""),$("#editValidationErrorsBox").text("Pick a different color"),setTimeout((function(){$("#editValidationErrorsBox").slideUp()}),5e3),void $(':input[id="btnEditSave"]').prop("disabled",!0);$(':input[id="btnEditSave"]').prop("disabled",!1),t.setColor(e),$("#edit_color").val(e)})),$(document).ready((function(){$("#departments-table").DataTable({processing:!0,serverSide:!0,order:[[0,"asc"]],ajax:{url:route("departments.index")},columnDefs:[{targets:[1],orderable:!1,className:"text-center",width:"5%"}],columns:[{data:"name",name:"name"},{data:function(e){return'<a title="Edit" class="btn action-btn btn-primary btn-sm edit-btn mr-1" data-id="'+e.id+'"><i class="cui-pencil action-icon"></i></a><a title="Delete" class="btn action-btn btn-danger btn-sm delete-btn"  data-id="'+e.id+'"><i class="cui-trash action-icon"></i></a>'},name:"id"}]}),$(document).on("click",".addNewDepartment",(function(e){$(".pcr-button").css({color:"#3F51B5",border:"1px solid grey"}),$("#AddModal").appendTo("body").modal("show")})),$("#description,#editDescription").summernote({placeholder:"Add Department description...",minHeight:200,toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough"]],["para",["paragraph"]]]});$(document).on("click","#color",(function(){!0})),$(document).on("submit","#addNewForm",(function(e){e.preventDefault();var t=""===$("<div />").html($("#description").summernote("code")).text().trim().replace(/ \r\n\t/g,""),r=jQuery(this).find("#btnSave");if(r.button("loading"),""==$("#color").val())return displayErrorMessage("Please select your color."),r.button("reset"),!1;if($("#description").summernote("isEmpty"))$("#description").val("");else if(t)return displayErrorMessage("Description field is not contain only white space"),r.button("reset"),!1;$(this);var a=$(this).serializeArray();$.ajax({url:route("departments.store"),type:"POST",data:a,success:function(e){e.success&&(displaySuccessMessage(e.message),$("#AddModal").modal("hide"),$("#departments-table").DataTable().ajax.reload(null,!1),window.livewire.emit("refresh"))},error:function(e){printErrorMessage("#validationErrorsBox",e)},complete:function(){r.button("reset")}})})),$(document).on("submit","#editForm",(function(e){e.preventDefault();var t=""===$("<div />").html($("#editDescription").summernote("code")).text().trim().replace(/ \r\n\t/g,""),r=($(this),jQuery(this).find("#btnEditSave"));if(r.button("loading"),$("#editDescription").summernote("isEmpty"))$("#editDescription").val("");else if(t)return displayErrorMessage("Description field is not contain only white space"),r.button("reset"),!1;var a=$(this).serializeArray(),o=$("#departmentId").val();$.ajax({url:route("departments-update",o),type:"post",data:a,success:function(e){e.success&&(displaySuccessMessage(e.message),$("#EditModal").modal("hide"),$("#departments-table").DataTable().ajax.reload(null,!1),window.livewire.emit("refresh"))},error:function(e){manageAjaxErrors(e)},complete:function(){r.button("reset")}})})),$("#AddModal").on("hidden.bs.modal",(function(){$("#description").summernote("code",""),e.setColor("#000000"),e.hide(),resetModalForm("#addNewForm","#validationErrorsBox")})),$("#EditModal").on("hidden.bs.modal",(function(){$("#editDescription").summernote("code",""),t.hide(),resetModalForm("#editForm","#editValidationErrorsBox")})),window.renderData=function(e){$.ajax({url:route("departments.edit",e),type:"GET",success:function(e){if(e.success){var r=e.data,a=document.createElement("textarea");a.innerHTML=r.name,$("#departmentId").val(r.id),$("#edit_name").val(a.value),$("#editDescription").summernote("code",r.description),t.setColor(r.color),$("#edit_email").val(r.email),$("#edit_website").val(r.website),$("#EditModal").appendTo("body").modal("show")}},error:function(e){manageAjaxErrors(e)}})},$(document).on("click",".edit-btn",(function(e){var t=$(e.currentTarget).attr("data-id");renderData(t)})),$(document).on("click",".delete-btn",(function(e){var t=$(e.currentTarget).attr("data-id");deleteItem(route("departments.destroy",t),"#departments-table","Department")})),$(document).on("click",".show-btn",(function(e){var t=$(e.currentTarget).attr("data-id");$.ajax({url:route("departments.show",t),type:"GET",beforeSend:function(){startLoader()},success:function(e){if(e.success){$("#showName").html(""),$("#showDescription").html(""),$("#showName").append(e.data.name);var t=document.createElement("textarea");t.innerHTML=isEmpty(e.data.description)?"N/A":e.data.description,$("#showDescription").append(t.value),$("#showModal").appendTo("body").modal("show")}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){stopLoader()}})}))}))})();