$(document).ready((function(){"use strict";$("#projectStatus").select2({width:"100%"}),$(document).on("change","#projectStatus",(function(){var e=$(this).val();projectStatusLivewire(e)})),window.projectStatusLivewire=function(e){window.livewire.emit("projectsStatus",e)}})),document.addEventListener("livewire:load",(function(){window.livewire.hook("message.processed",(function(){$("#projectStatus").select2({width:"100%"})}))})),Dropzone.options.dropzone={maxFilesize:12,maxFiles:25,renameFile:function(e){return(new Date).getTime()+"_"+(Math.random().toString(36).substring(2,8)+Math.random().toString(36).substring(2,8))+"_"+e.name.replace(/\s/g,"").replace(/\(/g,"_").replace(/\)/g,"")},thumbnailWidth:125,acceptedFiles:".png,.jpeg,.jpg,.pdf,.doc,.docx,.xls,.xlsx,.csv,.zip,.html,.rar,.css,.js,.txt,.json",addRemoveLinks:!0,dictFileTooBig:"File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",dictRemoveFile:"x",timeout:5e4,init:function(){var e=this;function t(e,t,i){var n=e.name.split(".").pop();if("pdf"==n?$(e.previewElement).find(".dz-image img").attr("src","/assets/img/pdf_icon.png"):-1!=n.indexOf("doc")||-1!=n.indexOf("docx")?$(e.previewElement).find(".dz-image img").attr("src","/assets/img/doc_icon.png"):-1!=n.indexOf("xls")||-1!=n.indexOf("xlsx")||-1!=n.indexOf("csv")?$(e.previewElement).find(".dz-image img").attr("src","/assets/img/xls_icon.png"):-1!=n.indexOf("zip")?$(e.previewElement).find(".dz-image img").attr("src","/assets/img/zip.png"):-1!=n.indexOf("rar")?$(e.previewElement).find(".dz-image img").attr("src","/assets/img/rar.png"):-1!=n.indexOf("html")?$(e.previewElement).find(".dz-image img").attr("src","/assets/img/html.png"):-1!=n.indexOf("css")?$(e.previewElement).find(".dz-image img").attr("src","/assets/img/css.png"):-1!=n.indexOf("json")?$(e.previewElement).find(".dz-image img").attr("src","/assets/img/json.png"):-1!=n.indexOf("js")?$(e.previewElement).find(".dz-image img").attr("src","/assets/img/js.png"):-1!=n.indexOf("txt")&&$(e.previewElement).find(".dz-image img").attr("src","/assets/img/text.png"),"undefined"===$(e.previewElement).find(".download-link").attr("href")&&$(e.previewElement).find(".download-link").hide(),$(e.previewElement).find(".download-link").length<1){var r=document.createElement("a");r.setAttribute("href",route("projects.index")+"/media/"+i+"?project_id="+projectId),r.setAttribute("class","download-link"),r.innerHTML="<br>Download",e.previewElement.appendChild(r)}$(".dz-image").last().find("img").attr({width:"100%",height:"100%"})}$.get(route("projects.attachments",projectId),(function(t){$.each(t.data,(function(t,i){var n={name:i.name,id:i.id};e.options.addedfile.call(e,n,n.id),e.options.thumbnail.call(e,n,i.url),e.emit("complete",n),e.emit("thumbnail",n,i.url,n.id),$(".dz-remove").eq(t).attr("data-file-id",i.id),$(".dz-remove").eq(t).attr("data-file-url",i.url)}))})),this.on("thumbnail",(function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;$(e.previewTemplate).find(".dz-details").css("display","none"),t(e,0,n);var r=e.name.split("."),a=r[0].replace(/\s/g,"").replace(/\(/g,"_").replace(/\)/g,""),l=e.name.split(".").pop(),d="",o=!0;$(e.previewElement).find(".download-link").on("click",(function(){o=!1})),$.inArray(l,["jpg","JPG","jpeg","png","PNG"])>-1&&(d='<a class="'+a+'" data-fancybox="gallery" href="'+i+'" data-toggle="lightbox" data-gallery="example-gallery"></a>',$(".previewEle").append(d)),e.previewElement.addEventListener("click",(function(){if(o){var t=e.previewElement.querySelector("[data-dz-name]").innerHTML,n=t.split(".").pop();if($.inArray(n,["jpg","JPG","jpeg","png","PNG"])>-1){var r=t.split(".")[0];$("."+r).trigger("click")}else window.open(i,"_blank")}o=!0}))})),this.on("addedfile",(function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t(e,0,n)}))},processing:function(){$(".dz-remove").html("x"),$(".dz-details").hide()},removedfile:function(e){swal({title:deleteHeading+" !",text:deleteMessage+' "'+deleteAttachment+'" ?',type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,confirmButtonColor:"#6777EF",cancelButtonColor:"#d33",cancelButtonText:noMessages,confirmButtonText:yesMessages},(function(){var t,i=e.previewElement.querySelector("[data-file-id]").getAttribute("data-file-id");return screenLock(),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="_token"]').attr("content")},type:"post",url:route("project.delete-attachment",i),data:{filename:name,project_id:projectId},complete:function(){location.reload(!0)},error:function(e){console.log("error",e),displayErrorMessage(e.responseJSON.message)}}),null!=(t=e.previewElement)?t.parentNode.removeChild(e.previewElement):void 0}))},success:function(e,t){var i=t.data,n=e.previewElement.querySelector("[data-dz-name]"),r=i.file_name,a=r.split("."),l=a[0],d=a[1],o=n.innerHTML.split(".")[0].replace(/\s/g,"").replace(/\(/g,"_").replace(/\)/g,"");n.innerHTML=r,$(e.previewTemplate).find(".dz-remove").attr("data-file-id",i.id),$(e.previewTemplate).find(".dz-remove").attr("data-file-url",i.file_url),$(e.previewElement).find(".download-link").attr("href",route("projects.index")+"/media/"+i.id+"?project_id="+projectId),$.inArray(d,["jpg","JPG","jpeg","png","PNG"])>-1?($(".previewEle").find("."+o).attr("href",i.file_url),$(".previewEle").find("."+o).attr("class",l)):(e.previewElement.addEventListener("click",(function(){window.open(i.file_url,"_blank")})),$(e.previewElement).find(".download-link").addClass("sdfaskdfjaksdfjaskldfjlasdf"))},error:function(e,t){var i,n=e.name.split(".").pop().toLowerCase();return-1==$.inArray(n,["png","jpg","jpeg","xls","xlsx","csv","pdf","doc","docx","zip","html","css","rar","txt","js","json"])?swal({title:"Error!",text:"The attachment must be a file of type: jpeg, jpg, png, xls, xlsx, pdf, doc, zip, rar, html, css, js, txt, json, csv, docx",type:"error",confirmButtonColor:"#6777EF",timer:5e3}):t.message?swal("Error!",t.message,"error"):swal("Error!",t,"error"),null!=(i=e.previewElement)?i.parentNode.removeChild(e.previewElement):void 0}};