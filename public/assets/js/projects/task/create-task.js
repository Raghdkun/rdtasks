(()=>{"use strict";$(document).ready((function(){$("#taskPriority").select2({width:"100%"}),$("#taskAssignee").select2({width:"100%",placeholder:"Select Assignee"}),canManageTags?$("#taskTagIds").select2({width:"100%",tags:!0,placeholder:"Select Tags",createTag:function(e){var t=!1;if($("#taskTagIds option").each((function(){$.trim(e.term).toUpperCase()===$.trim($(this).text()).toUpperCase()&&(t=!0)})),!t)return{id:e.term,text:e.term}}}):$("#taskTagIds").select2({width:"100%",placeholder:"Select Tags"})}));var e=[];$("#taskEstimateTimeHours").datetimepicker({format:"HH:mm",useCurrent:!1,locale:"ar"==languageName?"en":languageName,icons:{previous:"icon-arrow-left icons",next:"icon-arrow-right icons",up:"icon-arrow-up icons",down:"icon-arrow-down icons"},sideBySide:!0}),$("#taskEstimateTimeDays").hide(),$(document).on("click","#taskHours",(function(){$("#taskDays").removeClass("btn btn-primary text-white"),$(this).addClass("btn btn-primary text-white"),$("#taskTypes").val(0),$("#taskEstimateTimeDays").hide().val(""),$("#taskEstimateTimeHours").show()})),$(document).on("click","#taskDays",(function(){$("#taskHours").removeClass("btn btn-primary text-white"),$(this).addClass("btn btn-primary text-white"),$("#taskTypes").val(1),$("#taskEstimateTimeHours").data("DateTimePicker").date("00:00"),$("#taskEstimateTimeHours").hide().val(""),$("#taskEstimateTimeDays").show()})),$("#taskEstimateTimeHours").datetimepicker({format:"HH:mm",useCurrent:!1,locale:"ar"==languageName?"en":languageName,icons:{previous:"icon-arrow-left icons",next:"icon-arrow-right icons",up:"icon-arrow-up icons",down:"icon-arrow-down icons"},sideBySide:!0}),$("#taskDueDate").datetimepicker({format:"YYYY-MM-DD",useCurrent:!1,locale:"ar"==languageName?"en":languageName,icons:{previous:"icon-arrow-left icons",next:"icon-arrow-right icons"},sideBySide:!0,minDate:moment().millisecond(0).second(0).minute(0).hour(0)}),$("#taskDescription").summernote({placeholder:"Add Task description...",minHeight:200,toolbar:[["style",["bold","italic","underline","clear"]],["font",["strikethrough"]],["para",["paragraph"]]]}),function(t,a){e=[],$("#"+a).empty(),$("#"+a).trigger("change"),$.ajax({url:route("users-of-projects")+"?projectIds="+t,type:"GET",success:function(t){var s=t.data;for(var r in s)s.hasOwnProperty(r)&&($("#"+a).append($("<option>",{value:r,text:s[r]})),e.push(r));""===$("#projectId").val()||isShow||($("#"+a).val(currentLoggedInUserId),$("#"+a).trigger("change.select2"))}})}($("#projectId").val(),"taskAssignee"),$(document).on("submit","#addTaskNewForm",(function(e){e.preventDefault();var t=""===$("<div />").html($("#taskDescription").summernote("code")).text().trim().replace(/ \r\n\t/g,""),a=jQuery(this).find("#btnTaskSave");if(a.button("loading"),$("#taskDescription").summernote("isEmpty"))$("#taskDescription").val("");else if(t)return displayErrorMessage("Description field is not contain only white space"),a.button("reset"),!1;for(var s=new FormData($(this)[0]),r=$("#Add_attachment")[0].files,i=0;i<r.length;i++)s.append("file[]",r[i]);$.ajax({url:route("tasks.store"),type:"POST",data:s,contentType:!1,processData:!1,success:function(e){e.success&&(displaySuccessMessage(e.message),$("#addTaskModal").modal("hide"),$("#task_table").DataTable().ajax.reload(),revokerTracker(),window.livewire.emit("refresh"))},error:function(e){printErrorMessage("#projectTaskValidationErrorsBox",e)},complete:function(){a.button("reset")}})})),$("#addTaskModal").on("hidden.bs.modal",(function(){$("#taskDescription").summernote("code",""),$("#taskAssignee").val(null).trigger("change"),$("#taskTagIds").val(null).trigger("change"),$("#taskPriority").val(null).trigger("change"),$("#taskDueDate").data("DateTimePicker").clear(),$("#taskEstimateTimeHours").data("DateTimePicker").date("00:00"),$("#taskDays").removeClass("btn btn-primary text-white"),$("#taskHours").addClass("btn btn-primary text-white"),$("#taskTypes").val(0),$("#taskEstimateTimeDays").hide().val(""),$("#taskEstimateTimeHours").show().val(""),$("#previewImage").empty(),resetModalForm("#addTaskNewForm","#validationErrorsBox")}))})();